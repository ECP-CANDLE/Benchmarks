## Method Description

Image Generator for Tabular Data (IGTD) transforms tabular data into images. The algorithm assigns each feature to a pixel in the image. According to the assignment, an image is generated for each data sample, in which the pixel intensity reflects the value of the corresponding feature in the sample. The algorithm searches for an optimized assignment of features to pixels by minimizing the difference between the ranking of pairwise distances between features and the ranking of pairwise distances between the assigned pixels, where the distances between pixels are calculated based on their coordinates in the image. Minimizing the difference between the two rankings assigns similar features to neighboring pixels and dissimilar features to pixels that are far apart. The optimization is achieved through an iterative process of swapping the pixel assignments of two features. In each iteration, the algorithm identifies the feature that has not been considered for swapping for the longest time, and seeks for a feature swapping for it that reduces the difference between the two rankings most.

For the sbusequent prediction modeling, Convolutional Neural Networks (CNNs) can be trained based on the images generated by IGTD. The provided code allows the input of one or more data modalities. The images of each data modality is input into multiple convolution layers for embedding. Then the embeddings of multiple data modalities are concatenated and forwarded to multiple dense layers to make prediction.

## Setup

To set up the Python environment needed to run this algorithm:

1. Install [conda](https://docs.conda.io/en/latest/) package manager.
2. Clone this repository.
3. Enter the directory of Scripts
4. Create the environment as shown below.
   ```
   conda env create -f environment.yml -n IGTD
   conda activate IGTD
   ```
5. Run the Examples_Of_Table_To_Image_Conversion.py script for demo of converting tabular data into images.
6. Run the Examples_Of_Prediction_On_Images.py script for demo of building CNN models based on image data.

## Use IGTD to Convert Tabular Data into Images

The IGTD_Functions.py script provides all the functions used by the IGTD algorithm. Please see comments in the script for explanations about the inputs and outputs of all functions. table_to_image is the main function for running the IGTD algorithm. min_max_transform is the function to preprocess input data, so that the minimum and maximum values of each feature are linearly scaled to 0 and 1, respectively. Example_Run.py provides exmaples demonstrating how to use the functions for running the IGTD algorithm.

## Use CNNs to Predict Drug Response Using Images Generated by IGTD

Prediction_Modeling_Functions.py script provides all the functions needed to build CNN models. Please see comments in the script for explanations about the inputs and outputs of functions. load_example_data loads example data included in the package. get_data_for_cross_validation organizes data for cross-validation analysis. get_model_parameter obtains parameters of CNN models from files. CNN2D_Regression_Analysis and CNN2D_Classification_Analysis are functions to build CNN regression and classification models, respectively, and use the models to do predictions on testing data.
